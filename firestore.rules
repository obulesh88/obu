rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Since authentication is removed, we allow public access to user profiles
    // and referrals. In a production app, more granular security (like device-based IDs)
    // would be recommended.
    
    match /users/{userId} {
      allow read: if true;
      allow create: if true;
      allow update: if true;
    }

    match /referrals/{referralId} {
      allow create: if true;
      allow read: if true;
      allow update: if true;
    }
  }
}